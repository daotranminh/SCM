{% extends 'layout.html' %}

{% block body %}

<h1>Order Details</h1>

{% from "includes/_formhelpers.html" import render_field %}
<table class="table table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>      
    </tr>
  </thead>
  <tbody>
    <tr><td>Order Id</td><td>{{ order_dto.order_id }}</td></tr>
    <tr><td>Customer</td><td><a href="{{ url_for('customer_details', customer_id=order_dto.customer_id) }}">{{ order_dto.customer_name }}</a></td></tr>    
    <tr><td>Ordered on</td><td>{{ order_dto.ordered_on }}</td></tr>
    <tr><td>Delivery appointment</td><td>{{ order_dto.delivery_appointment }}</td></tr>
    <tr><td>Delivery method</td><td>{{ order_dto.delivery_method_name }}</td></tr>
    <tr><td>Order status</td><td>{{ order_dto.order_status_name }}</td></tr> 
    <tr><td>Delivered on</td><td>{{ order_dto.delivered_on }}</td></tr> 
    <tr><td>Payment status</td><td>{{ order_dto.payment_status_name }}</td></tr>
    <tr><td>Paid on</td><td>{{ order_dto.paid_on }}</td></tr>
    <tr><td>Message</td><td>{{ order_dto.message }}</td></tr>   
  </tbody>
</table>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Product Id</th>
      <th>Product Name</th>
      <th>Taste</th>
      <th>Decoration Form</th>
      <th>Decoration Technique</th>
      <th>Formula</th>
      <th>Sample Images</th>
      <th>Cost Estimation</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for product_dto in product_dtos %}
    <tr>
      <td>{{product_dto.product_id}}</td>
      <td><a href="{{ url_for('product_details', product_id=product_dto.product_id) }}">{{product_dto.product_name}}</a></td>
      <td>{{product_dto.taste_name}}</td>
      <td>{{product_dto.decoration_form_name}}</td>
      <td>{{product_dto.decoration_technique_name}}</td>

      {% if product_dto.formula_id is not none %}
        <td><a href="{{ url_for('formula_details', formula_id=product_dto.formula_id) }}">{{product_dto.formula_name}}</a></td>
      {% else %}
        <td>{{product_dto.formula_name}}</td>
      {% endif %}
      
      {% if product_dto.sample_images_group_id is not none %}
        <td><a href="{{ url_for('sample_images_group_details', sample_images_group_id=product_dto.sample_images_group_id) }}">{{product_dto.sample_images_group_name}}</a></td>
      {% else %}
      <td>{{product_dto.sample_images_group_name}}</td>
      {% endif %}

      {% if product_dto.formula_has_up_to_date_cost_estimation %}      
        <td>{{product_dto.product_cost_estimation}}</td>
        <td><a href="{{ url_for('estimate_product_cost', product_id=product_dto.product_id) }}" class="btn btn-default pullright" disabled>Estimate cost</a></td>
      {% else %}
        <td><font color="#A0A0A0">{{product_dto.product_cost_estimation}}</font></td>  
        <td><a href="{{ url_for('estimate_product_cost', product_id=product_dto.product_id) }}" class="btn btn-primary pullright">Estimate cost</a></td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>  

{% endblock %}
